<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lecture de Notes Violon Niveau 3</title>
  <link rel="stylesheet" href="unified.css">
  <style>
    .note img { max-width: 100px; height: auto; margin: 10px; }
    .note { display: inline-block; text-align: center; margin: 10px; }
    #feedback { font-size: 24px; font-weight: bold; margin-top: 20px; min-height: 40px; transition: color 0.3s ease; }
    #feedback.correct { color: green; }
    #feedback.incorrect { color: red; }
    #progress-container { width: 100%; background-color: #ddd; border-radius: 10px; margin-top: 20px; height: 20px; }
    #progress-bar { height: 100%; width: 0%; background-color: #4CAF50; border-radius: 10px; transition: width 0.4s ease-in-out; }
    #score-display { font-size: 28px; font-weight: bold; margin-top: 20px; }
    .gold-button {
      background: linear-gradient(to bottom right, #FFD700, #FFA500);
      color: black; font-weight: bold; border: 2px solid #DAA520;
      box-shadow: 0 0 10px gold; margin-bottom: 10px;
    }
    /* Toggle doigt√© (quiz uniquement) */
    .toolbar { display:flex; align-items:center; gap:12px; margin: 12px 0 4px; justify-content:flex-start; flex-wrap:wrap; }
    .switch { position: relative; display: inline-block; width: 50px; height: 28px; vertical-align: middle; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; inset: 0; background-color: #bfc3c7; transition: .2s; border-radius: 9999px; box-shadow: inset 0 0 0 2px rgba(0,0,0,.06); }
    .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left: 3px; top: 3px; background: white; transition: .2s; border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,.25); }
    .switch input:checked + .slider { background-color: #4CAF50; }
    .switch input:checked + .slider:before { transform: translateX(22px); }
    .toggle-label { font-size: 14px; color: #333; user-select: none; }
    /* Badge doigt√© au-dessus de la note */
    .note-display { position: relative; display: inline-block; }
    #fingering-badge {
      position: absolute; top: -6px; left: 50%; transform: translate(-50%,-100%);
      display: none; align-items: center; justify-content: center;
      min-width: 32px; height: 28px; padding: 0 10px;
      background: #222; color: #fff; border-radius: 14px;
      font-weight: 700; font-size: 16px; letter-spacing: .3px;
      box-shadow: 0 6px 12px rgba(0,0,0,.18);
    }
  </style>
</head>
<body>
  <h1>Violon ‚Äî Niveau 3 ‚Äî 0-1-2 (alternance par paires)</h1>

  <div class="section">
    <div class="section-topbar">
      <a class="home-link" href="index.html" aria-label="Revenir √† l'accueil">üè† Accueil</a>
    </div>

    <div id="note-reference">
      <h2>Notes travaill√©es (0 / 1 / 2) :</h2>
      <!-- Sol -->
      <div class="note"><img alt="Sol3" src="Images/sol/G3.png"/><p>Sol (0)</p></div>
      <div class="note"><img alt="La3"  src="Images/sol/A3.png"/><p>La (1)</p></div>
      <div class="note"><img alt="Si3"  src="Images/sol/B3.png"/><p>Si (2)</p></div>
      <!-- R√© -->
      <div class="note"><img alt="R√©4"  src="Images/sol/D4.png"/><p>R√© (0)</p></div>
      <div class="note"><img alt="Mi4"  src="Images/sol/E4.png"/><p>Mi (1)</p></div>
      <div class="note"><img alt="Fa4"  src="Images/sol/F4.png"/><p>Fa (2)</p></div>
      <!-- La -->
      <div class="note"><img alt="La4"  src="Images/sol/A4.png"/><p>La (0)</p></div>
      <div class="note"><img alt="Si4"  src="Images/sol/B4.png"/><p>Si (1)</p></div>
      <div class="note"><img alt="Do5"  src="Images/sol/C5.png"/><p>Do (2)</p></div>
      <!-- Mi -->
      <div class="note"><img alt="Mi5"  src="Images/sol/E5.png"/><p>Mi (0)</p></div>
      <div class="note"><img alt="Fa5"  src="Images/sol/F5.png"/><p>Fa (1)</p></div>
      <div class="note"><img alt="Sol5" src="Images/sol/G5.png"/><p>Sol (2)</p></div>

      <button class="button" id="start-quiz">Commencer le Quiz</button>
      <p style="margin-top: 10px; font-size: 14px; color: #555;">
        üí° Astuce : Clavier activ√© (C=Do, D=R√©, E=Mi, F=Fa, G=Sol, A=La, B=Si)
      </p>
    </div>

    <div id="quiz-section" style="display: none;">
      <!-- Options visibles seulement en quiz -->
      <div class="toolbar" aria-label="Options d‚Äôaffichage">
        <label class="switch" title="Afficher/masquer le doigt√©">
          <input id="toggle-fingering" type="checkbox" />
          <span class="slider"></span>
        </label>
        <span class="toggle-label">Afficher le doigt√©</span>
      </div>

      <div id="note-display" class="note-display">
        <div id="fingering-badge">0</div>
        <img alt="Note" id="note-image" src=""/>
      </div>
      <div id="game-container"></div>
      <div id="feedback"></div>
      <div id="progress-container"><div id="progress-bar"></div></div>
      <div id="score-display"></div>
    </div>

    <div id="end-buttons" style="display: none;">
      <button class="button" onclick="window.location.reload();">Recommencer le niveau</button>
      <button class="button" onclick="window.location.href='index.html';">Revenir √† l'accueil</button>
    </div>

    <div id="send-score" style="display: none; margin-top: 30px;">
      <h3>Envoyer mon score au professeur</h3>
      <input type="text" id="prenom" placeholder="Pr√©nom" required style="margin: 5px;" />
      <input type="text" id="nom" placeholder="Nom" required style="margin: 5px;" />
      <select id="prof" required style="margin: 5px; padding: 5px;">
        <option value="">Choisir un professeur</option>
        <option value="Barbara">Barbara</option>
        <option value="Benoit">Benoit</option>
        <option value="C√©line">C√©line</option>
        <option value="Chlo√©">Chlo√©</option>
        <option value="Fr√©d√©ric">Fr√©d√©ric</option>
        <option value="Sandrine">Sandrine</option>
        <option value="Thomas">Thomas</option>
      </select>
      <br>
      <button class="button" onclick="envoyerScore()">Envoyer</button>
      <p id="confirmation" style="margin-top:10px; font-weight: bold;"></p>
      <p id="loading-message" style="display: none; color: blue; font-weight: bold;">‚è≥ Envoi en cours...</p>
    </div>
  </div>

  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

  <script src="violon_niveau3.js"></script>
</body>
</html>
